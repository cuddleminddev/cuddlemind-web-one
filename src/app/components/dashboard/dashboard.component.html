<div class="container-fluid my-4">

    <!-- Filters row -->
    <div class="row mb-4">
        <div class="col-md-3">
            <label class="form-label">Start Date</label>
            <input class="form-control" placeholder="Start Date" name="startDate" [(ngModel)]="startDate" ngbDatepicker
                #startDp="ngbDatepicker" (click)="startDp.toggle()" autocomplete="off" readonly />
        </div>
        <div class="col-md-3">
            <label class="form-label">End Date</label>
            <input class="form-control" placeholder="End Date" name="endDate" [(ngModel)]="endDate" ngbDatepicker
                #endDp="ngbDatepicker" (click)="endDp.toggle()" autocomplete="off" readonly />
        </div>
        <div class="col-md-2 d-flex align-items-end">
            <button class="btn btn-primary w-100" (click)="onDateChange()">Apply Filters</button>
        </div>
    </div>

    <!-- Loader -->
    <div *ngIf="loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Stats cards -->
    <div *ngIf="!loading && datas" class="row row-cols-1 row-cols-md-4 g-4 mt-3">
        <div class="col">
            <div class="card dashboard-card p-3">
                <div class="d-flex align-items-center">
                    <div class="icon-box me-3">
                        <i class="bi bi-currency-exchange"></i>
                    </div>
                    <div>
                        <div class="card-title mb-1">Total Earnings</div>
                        <div class="card-text">{{ datas?.totalEarnings }}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card dashboard-card p-3">
                <div class="d-flex align-items-center">
                    <div class="icon-box me-3">
                        <i class="bi bi-hospital"></i>
                    </div>
                    <div>
                        <div class="card-title mb-1">Total Patients</div>
                        <div class="card-text">{{ datas?.totalPatients }}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card dashboard-card p-3">
                <div class="d-flex align-items-center">
                    <div class="icon-box me-3">
                        <i class="bi bi-journal-arrow-up"></i>
                    </div>
                    <div>
                        <div class="card-title mb-1">Total Bookings</div>
                        <div class="card-text">{{ datas?.totalBookings }}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card dashboard-card p-3">
                <div class="d-flex align-items-center">
                    <div class="icon-box me-3">
                        <i class="bi bi-person-badge"></i>
                    </div>
                    <div>
                        <div class="card-title mb-1">Total Doctors</div>
                        <div class="card-text">{{ datas?.totalDoctors }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts -->
    <div class="row mt-5">
        <div class="col-md-6">
            <div class="card dashboard-card p-4 h-100">
                <h5 class="mb-3">Distribution</h5>
                <div class="doughnutchart">
                    <div *ngIf="pieChartLoading" class="text-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                    <div *ngIf="!pieChartLoading && pieChartNoData" class="text-center text-muted py-5">
                        No data available
                    </div>
                    <canvas *ngIf="!pieChartNoData" #doughnutCanvas></canvas>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card dashboard-card p-4 h-100">
                <h5 class="mb-3">Bookings</h5>
                <div class="barchart">
                    <div *ngIf="lineChartLoading" class="text-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                    <div *ngIf="!lineChartLoading && lineChartNoData" class="text-center text-muted py-5">
                        No data available
                    </div>
                    <canvas *ngIf="!lineChartNoData" #lineCanvas></canvas>
                </div>
            </div>
        </div>
    </div>

</div>